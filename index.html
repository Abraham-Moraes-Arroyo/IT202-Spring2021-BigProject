<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
	<link href="css/bootstrap.min.css" rel="stylesheet">

	<link href="https://unpkg.com/material-components-web@10.0.0/dist/material-components-web.min.css" rel="stylesheet">
	<script src="https://unpkg.com/material-components-web@10.0.0/dist/material-components-web.min.js">

	</script>
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

	<!-- This is to hide the template for the search section CARDS -->
	<style>
		.template {
			display: none;
		}
	</style>

	<!-- for the screnes` -->
	<style>
		.screen {
			display: none;
		}

		body {
			margin: 0;
		}

		/* p{
        padding: 70px;
    } */
	</style>
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
	 crossorigin="anonymous">

	<!-- this is for the web manifest -->
	<script>
		if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('/sw.js').then(function(registration) {
      // Registration was successful
      console.log('ServiceWorker registration successful with scope: ', registration.scope);
    }, function(err) {
      // registration failed :(
      console.log('ServiceWorker registration failed: ', err);
    });
  });
}
	</script>
	<script>
		self.addEventListener('install', function(event) {
  // Perform install steps
});
	</script>
        <link rel="manifest" href="manifest.json">

</head>

<body>
	<header class="mdc-top-app-bar">
		<div class="mdc-top-app-bar__row">
			<section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
				<button class="material-icons mdc-top-app-bar__navigation-icon mdc-icon-button" aria-label="Open navigation menu">menu</button>
      <span class="mdc-top-app-bar__title">Safe and Sound</span>
    </section>
    <!-- don't need the following -->
    <!-- <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end" role="toolbar">
      <button class="material-icons mdc-top-app-bar__action-item mdc-icon-button" aria-label="Favorite">favorite</button>
      <button class="material-icons mdc-top-app-bar__action-item mdc-icon-button" aria-label="Search">search</button>
      <button class="material-icons mdc-top-app-bar__action-item mdc-icon-button" aria-label="Options">more_vert</button>
    </section> -->
  </div>
</header>
 
  <aside class="mdc-drawer mdc-drawer--modal">
    <div class="mdc-drawer__content">
      <nav class="mdc-list">
        <a class="mdc-list-item mdc-list-item--activated" href="#number1" aria-current="page" tabindex="0" aria-selected="true">
          <span class="mdc-list-item__ripple"></span>
          <i class="material-icons mdc-list-item__graphic" aria-hidden="true">inbox</i>
          <span class="mdc-list-item__text">Getting to know you</span>
          
        </a>
        <a class="mdc-list-item" href="#number2" tabindex="-1" aria-selected="false">
          <span class="mdc-list-item__ripple"></span>
          <i class="material-icons mdc-list-item__graphic" aria-hidden="true">send</i>
          <span class="mdc-list-item__text">Instructions</span>
        </a>
        <a class="mdc-list-item" href="#number3" tabindex="-1" aria-selected="false">
          <span class="mdc-list-item__ripple"></span>
          <i class="material-icons mdc-list-item__graphic" aria-hidden="true">drafts</i>
          <span class="mdc-list-item__text">Map</span>
        </a>
        <a class="mdc-list-item" href="#number4" tabindex="-1" aria-selected="false">
          <span class="mdc-list-item__ripple"></span>
          <i class="material-icons mdc-list-item__graphic" aria-hidden="true">drafts</i>
          <span class="mdc-list-item__text">About Me</span>
        </a>
        <a class="mdc-list-item" href="#number5" tabindex="-1" aria-selected="false">
          <span class="mdc-list-item__ripple"></span>
          <i class="material-icons mdc-list-item__graphic" aria-hidden="true">drafts</i>
          <span class="mdc-list-item__text">Current Weather</span>
        </a>
      </nav>
    </div>
  </aside>

  <div class="mdc-drawer-scrim"></div>
  <main class="mdc-top-app-bar--fixed-adjust">
    <!-- where all of my divs/ screens are going to be -->
    <div id="number1" class="screen">
      <!-- code dump from the first screen plan -->
  <!-- drop the question here: -->
  <center>
      <h5 class="card-title">Hello what is your name?</h5>

  <label class="mdc-text-field mdc-text-field--filled mdc-text-field--no-label">
    <span class="mdc-text-field__ripple"></span>
    <input class="mdc-text-field__input" type="text" placeholder="Enter your name" aria-label="Label" id="userInput">
    <span class="mdc-line-ripple"></span>
  </label>
  <!--The button part of the assignment  -->
    <button id="save" class="mdc-button mdc-button--raised">Enter</button>
<!-- the Snackbar part of the assignment -->
  </center>
    <div class="mdc-snackbar">
      <div class="mdc-snackbar__surface" role="status" aria-relevant="additions">
        <div class="mdc-snackbar__label" aria-atomic="false">
          Can't send photo. Retry in 5 seconds.
        </div>
        <div class="mdc-snackbar__actions" aria-atomic="true">
          <button type="button" class="mdc-button mdc-snackbar__action">
            <div class="mdc-button__ripple"></div>
            <span class="mdc-button__label">clear</span>
          </button>
        </div>
      </div>

    <!-- Include Dexie -->
      <script src="https://unpkg.com/dexie@latest/dist/dexie.js"></script>
    <script>

     let snackbar = mdc.snackbar.MDCSnackbar.attachTo(document.querySelector('.mdc-snackbar'));


    // Define your database

    var db = new Dexie("app_db");
    db.version(1).stores({
        names: 'name'
    });


      document.querySelector("#save").addEventListener("click", (e) => {
        let value = document.querySelector("input").value;
        db.names.put({name: value, date: new Date()})
          .then ( (item) => {

              snackbar.labelText = "Hello "+ value ;
              snackbar.open();

          });
      }); 


    </script>
  
</div>

    </div>
  <!-- the about me screen -->
      <div id="number4" class="screen">
          <center>
            <h5 class="mdc-typography--headline4">Goal</h5>
                  <p class="card-text mdc-typography--subtitle2">For this project, I built a Single-Page App that informs the user of the crime data that has occured in the city of Chicago, and around their location, as long as they are in Chicago. User's are also informed about the weather, based on their location. </p>
              <!-- class="mdc-typography--subtitle2" -->
                <h5 class="mdc-typography--headline4">Abraham Morales Arroyo</h5>
                
                <p class="mdc-typography--subtitle2">He is a softmore at the University of Illinois at UIC and he is currently enrolled in IT 202. Want to get to know me better? Click on my personal page to do so.</p>
                
                <!-- here is where I am going to work with the button using the material os -->
                <!-- <button >
                <a href="https://abraham-moraes-arroyo.github.io/" class="btn btn-primary">Personal Page</a>
                </button> -->
               <div class="mdc-touch-target-wrapper">
                <button class="mdc-button mdc-button--touch" >
                  <span class="mdc-button__ripple"></span>
                  <span class="mdc-button__label" >My web page</span>
                  <span class="mdc-button__touch" href="https://abraham-moraes-arroyo.github.io/" class="btn btn-primary"></span>
                </button>
              </div>
          </center>
      </div>


<!-- screen number 5 for the projec the weather screen -->
<div id="number5" class="screen">
  <div class="mdc-card">
  <div class="mdc-card__primary-action mdc-typography--headline5"  tabindex="0">
    <center>
      <div class="mdc-card mdc-card--outlined">
    <h1 class="mdc-typography--headline3">Current weather</h1>
    </div>
    <p class="mdc-typography--headline4">City:</p>
    <p class="name mdc-typography--headline6"></p>
    <p class="mdc-typography--headline4">Temperature in Farenheit:</p>
    <p class="temp mdc-typography--headline6"></p>
    <p class="mdc-typography--headline4">Feels like:</p>
    <p class="feels_like mdc-typography--headline6"></p>
    <p class="mdc-typography--headline4">Description:</p>
    <p class="description mdc-typography--headline6"></p>
    </center>

  </div>
  </div>
  <!-- this is for the weather screen -->
      <script>
      window.addEventListener('load', (event) => {

      var name = document.querySelector('.name');
      var temp = document.querySelector('.temp');
      var feelstemp =document.querySelector('.feels_like');
      var desc = document.querySelector('.description');
      //Here I am going to see if I can get the image of the weather
      var pic = document.querySelector('.icon');
      
      fetch('https://api.openweathermap.org/data/2.5/weather?q=Chicago&appid=411a18eda248ba90a81d93a611ff246e')
        .then(response => response.json())
        .then(data => {
          var nameValue=data['name'];
          var tempValue =data['main']['temp'];
          var feelstempValue = data['main']['feels_like'];
          var descValue=data['weather'][0]['description'];
          

          name.innerHTML= nameValue;
          temp.innerHTML= Math.round((tempValue)-273.15) *( 9/5) +(32)+('F');
          feelstemp.innerHTML= Math.round((feelstempValue)-273.15)*(9/5)+(32)+('F')
          desc.innerHTML= descValue;
        })
//(0K − 273.15) × 9/5 + 32
        // this was done with open weather api key

        });
    </script>
</div>

<!-- screen number 2 for the project -->
    <div id="number2" class="screen">
      <center>

    <h5 class="mdc-typography--headline4">Instructions</h5>
    <p class="mdc-typography--subtitle2">Welcome to Safe and Sound. Have you ever wanted to go to a place but not sure what is the safest route to get there, or have you recently planed on moving to the city of Chicago, but not sure what place is the safest for you and or your family? Well you got the right app at your disposal. Based on your location we have plotted the crimes onto a map, and based on your location you are able to see if the place where you are currently are at is either hot in crime or not. Once you have read this make sure to click on the stack icon towards the left of the screen and click on the tab named: "Getting to know you"</p>

</center>
<!-- end of code dump for  -->
    </div>

    <div id="number3" class="screen">
     <!-- drop the map code here: -->
     <center>
       <p>Your position is on the map as a red dot. The map will display your location under the map with your location in latitude and longitude. the red pointers represents the crimes that have been documented. Ideally the more marks that your are around you area you may want to ignore those streets and neighboorhoods.</p>
     </center>
      <div id="googleMap" style="width:100%;height:400px;"></div>
 <div id="currentLocation">
  </div>

<script>
  
let map;
function myMap() {
var mapProp= {
  center:new google.maps.LatLng(41.931293499999995,-87.766255),
  zoom:15,
};
map = new google.maps.Map(document.getElementById("googleMap"),mapProp);
if (navigator.geolocation) {
    navigator.geolocation.watchPosition(showPosition);
}


// <!-- add a div element to the html and in the show position log it -->

//for drawing circles

console.log("hello");
// const cityCircle = new google.maps.Circle({
//       strokeColor: "#FF0000",
//       strokeOpacity: 0.8,
//       strokeWeight: 2,
//       fillColor: "#FF0000",
//       fillOpacity: 0.35,
//       map,
//       center: new google.maps.LatLng(41.931293499999995,-87.766255),
//       radius: 60,
//     });
}
console.log("goodbye")


function showPosition(position) {
  let cityCircle = new google.maps.Circle({
      strokeColor: "#FF0000",
      strokeOpacity: 0.8,
      strokeWeight: 2,
      fillColor: "#FF0000",
      fillOpacity: 0.35,
      map,
      center: new google.maps.LatLng(position.coords.latitude,position.coords.longitude),
      radius: 30,
    });
    console.log(position.coords.latitude , 
     position.coords.longitude);
    map.setCenter(new google.maps.LatLng(position.coords.latitude,position.coords.longitude));
  let p =document.createElement("p")
  p.innerText=(position.coords.latitude.toString()) + "," + (position.coords.longitude.toString() + " "+(new Date()))
  document.querySelector('#currentLocation').prepend(p)

}
</script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDLUf62RCvErgmFdYnI8TMcBn9MoNcYcCU&callback=myMap"></script>
    </div>
  <!-- App content -->
</main> 

<script>
    // mdc.ripple.MDCRipple.attachTo(document.querySelector('.foo-button'));  

    const drawer = mdc.drawer.MDCDrawer.attachTo(document.querySelector('.mdc-drawer')); 

    // Instantiation
    const topAppBarElement = document.querySelector('.mdc-top-app-bar');
    // const topAppBar = mdc.top_app_bar.MDCTopAppBar.attachTo(topAppBarElement);

    const listEl = document.querySelector('.mdc-drawer .mdc-list');
    const mainContentEl = document.querySelector('main');

    listEl.addEventListener('click', (event) => {
      drawer.open = false;
    });
  //when the user clicks on the drawer
    document.querySelector("header button.mdc-top-app-bar__navigation-icon").addEventListener( "click", (event) => {
      drawer.open = true;

    })

    document.body.addEventListener('MDCDrawer:closed', (event) => {
      // mainContentEl.querySelector('input, button').focus();
    });

    // new 
    document.querySelectorAll('.mdc-list-item').forEach((element) => {
      element.addEventListener('click', (event) => {
        
      hidescreens();
       let href= event.target.getAttribute("href");
       console.log(href)
       console.log(event)
       document.querySelector(href).style.display="block";
       
    });
    });
    
    let hidescreens =() =>{
      document.querySelectorAll(".screen").forEach((element) => {
        element.style.display="none";
      });
    }
  
  </script>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>

    <!-- this is where I will drop the showing of the home page, when the user loads the page -->
    <script>
      // attempt number 1:
      // document.querySelectorAll('number2').forEach((element) => {
      //   element.addEventListener('load', (event) => {
      //     element.style.display="block";
      //   });
      // });


      // attempt numer 2:
      window.addEventListener('load', (event) => {
    //     // below is just a test to see if it works, and it does
      document.querySelector("#number2").style.display="block";
    });
    </script>

    <!-- this is for the script for the map plots -->
<script>
  let  url= "https://data.cityofchicago.org/resource/crimes.json";
  fetch (url)
          .then ( ( response ) => { return response.json() })
          .then ( (data) => {
            // console.log(data)
            data.forEach( (item) => {
                console.log(item.longitude , item.latitude)
                //make map markers
                 // The marker, positioned at Uluru
                  const marker = new google.maps.Marker({
                    position: { lat: parseFloat(item.latitude), lng: parseFloat(item.longitude) },
                    map: map,
                  });
            });
});  



</script>
</body></html>