<!DOCTYPE html>
<html>
  <head>
  <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
  <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
  <!-- these are the drawer icons -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<!-- this is for the instructions card in the home page -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Trirong">
  <link rel="manifest" href="manifest.json">

 <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

</head>
  <body>

          <!-- this is for the web manifest -->
<script>
  if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('/sw.js').then(function(registration) {
      // Registration was successful
      console.log('ServiceWorker registration successful with scope: ', registration.scope);
    }, function(err) {
      // registration failed :(
      console.log('ServiceWorker registration failed: ', err);
    });
  });
}
</script> 


<!-- this is the part where I tell the user to feel free to give the app their location because we will not sell their data or profit out of their data -->




<script>
  self.addEventListener('install', function(event) {
  // Perform install steps
});
// <!-- this is the part where the nav bar is going to be placed on the top of the page, I still need to figure out the part where the user clicks on the drawer and is able to get to the other screens of the app. -->
</script>
    <script src="script.js"></script>
    <header class="mdc-top-app-bar">
  <div class="mdc-top-app-bar__row">
    <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
      <button class="material-icons mdc-top-app-bar__navigation-icon mdc-icon-button" aria-label="Open navigation menu">menu</button>
      <span class="mdc-top-app-bar__title">safe and sound</span>
    </section>
    <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end" role="toolbar">
      <button class="material-icons mdc-top-app-bar__action-item mdc-icon-button" aria-label="Favorite">favorite</button>
      
      <button class="material-icons mdc-top-app-bar__action-item mdc-icon-button" aria-label="Options">more_vert</button>
    </section>
  </div>
</header>
<main class="mdc-top-app-bar--fixed-adjust">
  <div class="mdc-card">
    <!-- this is the style for the card that contains the instructions -->
    <style>
      .my-card-content {
      padding: 56px;
      font-family: "Trirong", serif;
      }
      
      </style>

<!-- this is to get the user's name -->
      <center> 
<div class="card" style="width: 18rem;">
  <!-- drop the question here: -->
      <h5 class="card-title">Hello what is your namne?</h5>

  <label class="mdc-text-field mdc-text-field--filled mdc-text-field--no-label">
    <span class="mdc-text-field__ripple"></span>
    <input class="mdc-text-field__input" type="text" placeholder="Enter your name" aria-label="Label" id="userInput">
    <span class="mdc-line-ripple"></span>
  </label>
  <!--The button part of the assignment  -->
    <button id="save" class="mdc-button mdc-button--raised">Enter</button>
<!-- the Snackbar part of the assignment -->
    <div class="mdc-snackbar">
      <div class="mdc-snackbar__surface" role="status" aria-relevant="additions">
        <div class="mdc-snackbar__label" aria-atomic="false">
          Can't send photo. Retry in 5 seconds.
        </div>
        <div class="mdc-snackbar__actions" aria-atomic="true">
          <button type="button" class="mdc-button mdc-snackbar__action">
            <div class="mdc-button__ripple"></div>
            <span class="mdc-button__label">Retry</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Include Dexie -->
      <script src="https://unpkg.com/dexie@latest/dist/dexie.js"></script>
    <script>

     let snackbar = mdc.snackbar.MDCSnackbar.attachTo(document.querySelector('.mdc-snackbar'));


    // Define your database

    var db = new Dexie("app_db");
    db.version(1).stores({
        names: 'name'
    });


      document.querySelector("#save").addEventListener("click", (e) => {
        let value = document.querySelector("input").value;
        db.names.put({name: value, date: new Date()})
          .then ( (item) => {

              snackbar.labelText = "Hello "+ value ;
              snackbar.open();

          });
      }); 


    </script>
  
</div>


      </center>
<!-- this is for the first screen where the user will be able to read the instructions -->

<center>
 <div class="card" style="width: 18rem;">
  <div class="card-body">
    <h5 class="card-title">Instructions</h5>
    <p class="card-text">You can get around the city without any issues and this app shows where you have been, as long as you have the app working, that way you are able to track back your steps and be able to get to the destination where you came from in the begging. This is done by going to the Location tab and pressing on the button enable location. Once you have done that you may go to the map tab to see your location be placed in a map. If you feel unsafe you can go to a local police station to get help. These are indicated as blue dots, and you can tell what neighborhoods to avoid if there are a lot of green dots in a single location. This represents the crimes that were recorded to take in that place. Safe Travels!</p>
  </div>
</div>
</center>

<!-- this is for the second screen which is the screen that get's the user's location and it also mentions that their location data is only used within the app and that their data is destoryed when they close / exit the app -->
  <center>

  <div class="card" style="width: 18rem;">
  <div class="card-body">
    <h5 class="card-title">Hello There</h5>
    <p class="card-text">We don't sell or store your storage location on other devices or applications. Once you have exited the app the data accomulated is destroyed. Reloading the app will also cause for your data to be deleted. So feel free to press on that allow location button</p>
  </div>
</div>

</center>
</div>
</main>
<!-- this is for the users to go to differnet screens -->
  <aside class="mdc-drawer mdc-drawer--modal">
    <div class="mdc-drawer__content">
      <nav class="mdc-list">
        <a class="mdc-list-item mdc-list-item--activated" href="#" aria-current="page" tabindex="0">
          <span class="mdc-list-item__ripple"></span>
          <i class="material-icons mdc-list-item__graphic" aria-hidden="true">inbox</i>
          <span class="mdc-list-item__text">Inbox</span>
        </a>
        <a class="mdc-list-item" href="#">
          <span class="mdc-list-item__ripple"></span>
          <i class="material-icons mdc-list-item__graphic" aria-hidden="true">send</i>
          <span class="mdc-list-item__text">Outgoing</span>
        </a>
        <a class="mdc-list-item" href="#">
          <span class="mdc-list-item__ripple"></span>
          <i class="material-icons mdc-list-item__graphic" aria-hidden="true">drafts</i>
          <span class="mdc-list-item__text">Drafts</span>
        </a>
      </nav>
    </div>
  </aside>

  <div class="mdc-drawer-scrim"></div>
  <div>Main Content</div>

  <!-- this is for the map part A.K.A. the third screen I am goign to work on it parts, first taking the user's location -->
  
<div id="googleMap" style="width:100%;height:400px;"></div>
 <div id="currentLocation">
  </div>

  
<script>
let map;
function myMap() {
var mapProp= {
  center:new google.maps.LatLng(41.931293499999995,-87.766255),
  zoom:15,
};
map = new google.maps.Map(document.getElementById("googleMap"),mapProp);
if (navigator.geolocation) {
    navigator.geolocation.watchPosition(showPosition);
}


// <!-- add a div element to the html and in the show position log it -->

//for drawing circles

console.log("hello");

}
console.log("goodbye")

// I use the plotting of circles in order to allow the user to track where they have been in order to prevent themselves from going in the same direction over and over again. It is not a bug it's a feature
function showPosition(position) {
  let cityCircle = new google.maps.Circle({
      strokeColor: "#FF0000",
      strokeOpacity: 0.8,
      strokeWeight: 2,
      fillColor: "#FF0000",
      fillOpacity: 0.35,
      map,
      center: new google.maps.LatLng(position.coords.latitude,position.coords.longitude),
      radius: 60,
    });
    console.log(position.coords.latitude , 
     position.coords.longitude);
    map.setCenter(new google.maps.LatLng(position.coords.latitude,position.coords.longitude));
  let p =document.createElement("p")
  p.innerText=(position.coords.latitude.toString()) + "," + (position.coords.longitude.toString() + " "+(new Date()))
  document.querySelector('#currentLocation').prepend(p)

}
</script>

<!-- The fourth screen the about me page -->
<center>
            <h5 class="card-title">Goal</h5>
                  <p class="card-text">For this project, I built a Single-Page App that allows users to see their location on a map that shows locations where they can get help if there is any conflict and what places of the city to avoid if they want to feel secure. </p>
            <div class="card" style="width: 18rem;">
              
              <div class="card-body">
                <h5 class="card-title">Abraham Morales Arroyo</h5>
                
                <p class="card-text">He is a softmore at the University of Illinois at UIC and he is currently enrolled in IT 202. Want to get to know me better? Click on my personal page to do so.</p>
                
                <a href="https://abraham-moraes-arroyo.github.io/" class="btn btn-primary">Personal Page</a>
              </div>
            </div>
          </center>

<!-- this is for the about screen  -->
<!-- this is what makes the map work this is where the api key is dropped -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDLUf62RCvErgmFdYnI8TMcBn9MoNcYcCU&callback=myMap"></script>



 <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js" integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js" integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc" crossorigin="anonymous"></script>
    -->
  </body>
</html>